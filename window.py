# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'task_project.ui'
#
# Created by: PyQt5 UI code generator 5.15.9
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.


from PyQt5 import QtCore, QtGui, QtWidgets
from PyQt5.QtGui import QStandardItemModel, QStandardItem

from Task import *
from DBHandler import *


class DDBHandler:
    pass

class Ui_MainWindow(object):
    def setupUi(self, MainWindow):
        MainWindow.setObjectName("MainWindow")
        MainWindow.resize(1115, 852)
        MainWindow.setStyleSheet("background-color: rgb(57, 57, 57);")
        self.centralwidget = QtWidgets.QWidget(MainWindow)
        self.centralwidget.setObjectName("centralwidget")
        self.frame = QtWidgets.QFrame(self.centralwidget)
        self.frame.setGeometry(QtCore.QRect(0, 0, 291, 1061))
        self.frame.setStyleSheet("background-color: rgb(13, 13, 13);")
        self.frame.setFrameShape(QtWidgets.QFrame.StyledPanel)
        self.frame.setFrameShadow(QtWidgets.QFrame.Raised)
        self.frame.setObjectName("frame")
        self.addTaskMenu = QtWidgets.QPushButton(self.frame)
        self.addTaskMenu.setGeometry(QtCore.QRect(30, 60, 221, 61))
        self.addTaskMenu.clicked.connect(self.showAddTaskFrame)
        font = QtGui.QFont()
        font.setPointSize(12)
        font.setBold(True)
        font.setWeight(75)
        self.addTaskMenu.setFont(font)
        self.addTaskMenu.setStyleSheet("background-color: rgb(0, 0, 255);\n"
"selection-background-color: rgb(255, 0, 127);")
        icon = QtGui.QIcon()
        icon.addPixmap(QtGui.QPixmap("icons/534029-200.png"), QtGui.QIcon.Normal, QtGui.QIcon.Off)
        self.addTaskMenu.setIcon(icon)
        self.addTaskMenu.setIconSize(QtCore.QSize(40, 40))
        self.addTaskMenu.setFlat(False)
        self.addTaskMenu.setObjectName("addTaskMenu")
        self.listTaskMenu = QtWidgets.QPushButton(self.frame)
        self.listTaskMenu.setGeometry(QtCore.QRect(30, 210, 221, 61))
        font = QtGui.QFont()
        font.setPointSize(12)
        font.setBold(True)
        font.setWeight(75)
        self.listTaskMenu.setFont(font)
        self.listTaskMenu.setStyleSheet("background-color: rgb(0, 0, 255);\n"
"selection-background-color: rgb(255, 0, 127);")
        icon1 = QtGui.QIcon()
        icon1.addPixmap(QtGui.QPixmap("icons/102005.png"), QtGui.QIcon.Normal, QtGui.QIcon.Off)
        self.listTaskMenu.setIcon(icon1)
        self.listTaskMenu.setIconSize(QtCore.QSize(40, 40))
        self.listTaskMenu.setFlat(False)
        self.listTaskMenu.setObjectName("listTaskMenu")
        self.listTaskMenu.clicked.connect(self.showListTaskFrame)
        self.frame_3 = QtWidgets.QFrame(self.centralwidget)
        self.frame_3.setGeometry(QtCore.QRect(300, 0, 791, 831))
        self.frame_3.setFrameShape(QtWidgets.QFrame.StyledPanel)
        self.frame_3.setFrameShadow(QtWidgets.QFrame.Raised)
        self.frame_3.setObjectName("frame_3")
        self.label_4 = QtWidgets.QLabel(self.frame_3)
        self.label_4.setGeometry(QtCore.QRect(70, 10, 191, 41))
        font = QtGui.QFont()
        font.setPointSize(16)
        font.setBold(True)
        font.setWeight(75)
        self.label_4.setFont(font)
        self.label_4.setStyleSheet("color: rgb(255, 255, 255);")
        self.label_4.setObjectName("label_4")
        self.tableView = QtWidgets.QTableView(self.frame_3)
        self.tableView.setGeometry(QtCore.QRect(70, 70, 571, 211))
        self.tableView.setStyleSheet("background-color: rgb(255, 170, 255);")
        self.tableView.setObjectName("tableView")
        self.todaysTaskTitle = QtWidgets.QLineEdit(self.frame_3)
        self.todaysTaskTitle.setGeometry(QtCore.QRect(70, 350, 571, 61))
        font = QtGui.QFont()
        font.setPointSize(14)
        font.setBold(True)
        font.setWeight(75)
        self.todaysTaskTitle.setFont(font)
        self.todaysTaskTitle.setStyleSheet("background-color: rgb(255, 170, 255);")
        self.todaysTaskTitle.setObjectName("todaysTaskTitle")
        self.todaysTaskDesc = QtWidgets.QPlainTextEdit(self.frame_3)
        self.todaysTaskDesc.setGeometry(QtCore.QRect(70, 620, 571, 141))
        font = QtGui.QFont()
        font.setPointSize(13)
        self.todaysTaskDesc.setFont(font)
        self.todaysTaskDesc.setStyleSheet("background-color: rgb(255, 170, 255);")
        self.todaysTaskDesc.setObjectName("todaysTaskDesc")
        self.pushButton_2 = QtWidgets.QPushButton(self.frame_3)
        self.pushButton_2.setGeometry(QtCore.QRect(280, 780, 161, 51))
        font = QtGui.QFont()
        font.setPointSize(16)
        font.setBold(True)
        font.setWeight(75)
        self.pushButton_2.setFont(font)
        self.pushButton_2.setStyleSheet("background-color: rgb(255, 85, 0);")
        self.pushButton_2.setObjectName("pushButton_2")
        self.label_5 = QtWidgets.QLabel(self.frame_3)
        self.label_5.setGeometry(QtCore.QRect(70, 290, 191, 51))
        font = QtGui.QFont()
        font.setPointSize(16)
        font.setBold(False)
        font.setWeight(50)
        self.label_5.setFont(font)
        self.label_5.setStyleSheet("color: rgb(255, 255, 255);")
        self.label_5.setObjectName("label_5")
        self.label_6 = QtWidgets.QLabel(self.frame_3)
        self.label_6.setGeometry(QtCore.QRect(70, 560, 161, 41))
        font = QtGui.QFont()
        font.setPointSize(16)
        font.setBold(False)
        font.setWeight(50)
        self.label_6.setFont(font)
        self.label_6.setStyleSheet("color: rgb(255, 255, 255);")
        self.label_6.setObjectName("label_6")
        self.todaysTaskDateTime = QtWidgets.QLineEdit(self.frame_3)
        self.todaysTaskDateTime.setGeometry(QtCore.QRect(70, 480, 571, 61))
        font = QtGui.QFont()
        font.setPointSize(13)
        font.setBold(False)
        font.setWeight(50)
        self.todaysTaskDateTime.setFont(font)
        self.todaysTaskDateTime.setStyleSheet("background-color: rgb(255, 170, 255);")
        self.todaysTaskDateTime.setObjectName("todaysTaskDateTime")
        self.label_7 = QtWidgets.QLabel(self.frame_3)
        self.label_7.setGeometry(QtCore.QRect(70, 430, 191, 31))
        font = QtGui.QFont()
        font.setPointSize(16)
        font.setBold(False)
        font.setWeight(50)
        self.label_7.setFont(font)
        self.label_7.setStyleSheet("color: rgb(255, 255, 255);")
        self.label_7.setObjectName("label_7")
        self.frame_2 = QtWidgets.QFrame(self.centralwidget)
        self.frame_2.setGeometry(QtCore.QRect(299, 9, 821, 851))
        self.frame_2.setFrameShape(QtWidgets.QFrame.StyledPanel)
        self.frame_2.setFrameShadow(QtWidgets.QFrame.Raised)
        self.frame_2.setObjectName("frame_2")
        self.calenderAddTask = QtWidgets.QCalendarWidget(self.frame_2)
        self.calenderAddTask.setGeometry(QtCore.QRect(281, 25, 451, 261))
        self.calenderAddTask.setStyleSheet("background-color: rgb(255, 170, 255);")
        self.calenderAddTask.setObjectName("calenderAddTask")
        self.label = QtWidgets.QLabel(self.frame_2)
        self.label.setGeometry(QtCore.QRect(50, 130, 141, 61))
        font = QtGui.QFont()
        font.setPointSize(14)
        font.setBold(False)
        font.setWeight(50)
        self.label.setFont(font)
        self.label.setStyleSheet("color: rgb(255, 255, 255);")
        self.label.setObjectName("label")
        self.addTaskTime = QtWidgets.QTimeEdit(self.frame_2)
        self.addTaskTime.setGeometry(QtCore.QRect(280, 350, 451, 51))
        font = QtGui.QFont()
        font.setPointSize(14)
        font.setBold(True)
        font.setWeight(75)
        self.addTaskTime.setFont(font)
        self.addTaskTime.setStyleSheet("background-color: rgb(255, 170, 255);")
        self.addTaskTime.setObjectName("addTaskTime")
        self.label_2 = QtWidgets.QLabel(self.frame_2)
        self.label_2.setGeometry(QtCore.QRect(50, 340, 141, 61))
        font = QtGui.QFont()
        font.setPointSize(14)
        font.setBold(False)
        font.setWeight(50)
        self.label_2.setFont(font)
        self.label_2.setStyleSheet("color: rgb(255, 255, 255);")
        self.label_2.setObjectName("label_2")
        self.taskNameEdit = QtWidgets.QLineEdit(self.frame_2)
        self.taskNameEdit.setGeometry(QtCore.QRect(280, 450, 451, 51))
        font = QtGui.QFont()
        font.setPointSize(12)
        font.setBold(True)
        font.setWeight(75)
        self.taskNameEdit.setFont(font)
        self.taskNameEdit.setStyleSheet("background-color: rgb(255, 170, 255);")
        self.taskNameEdit.setObjectName("taskNameEdit")
        self.label_3 = QtWidgets.QLabel(self.frame_2)
        self.label_3.setGeometry(QtCore.QRect(50, 440, 141, 61))
        font = QtGui.QFont()
        font.setPointSize(14)
        font.setBold(False)
        font.setWeight(50)
        self.label_3.setFont(font)
        self.label_3.setStyleSheet("color: rgb(255, 255, 255);")
        self.label_3.setObjectName("label_3")
        self.TaskDescEdit = QtWidgets.QPlainTextEdit(self.frame_2)
        self.TaskDescEdit.setGeometry(QtCore.QRect(280, 550, 451, 151))
        font = QtGui.QFont()
        font.setPointSize(12)
        font.setBold(False)
        font.setWeight(50)
        self.TaskDescEdit.setFont(font)
        self.TaskDescEdit.setStyleSheet("background-color: rgb(255, 170, 255);")
        self.TaskDescEdit.setObjectName("TaskDescEdit")
        self.taskDescEdit = QtWidgets.QLabel(self.frame_2)
        self.taskDescEdit.setGeometry(QtCore.QRect(50, 580, 141, 61))
        font = QtGui.QFont()
        font.setPointSize(14)
        font.setBold(False)
        font.setWeight(50)
        self.taskDescEdit.setFont(font)
        self.taskDescEdit.setStyleSheet("color: rgb(255, 255, 255);")
        self.taskDescEdit.setObjectName("taskDescEdit")
        self.pushButton = QtWidgets.QPushButton(self.frame_2)
        self.pushButton.setGeometry(QtCore.QRect(600, 740, 131, 51))
        font = QtGui.QFont()
        font.setPointSize(12)
        font.setBold(True)
        font.setWeight(75)
        self.pushButton.setFont(font)
        self.pushButton.setStyleSheet("background-color: rgb(85, 255, 0);")
        self.pushButton.setObjectName("pushButton")
        self.frame_3.raise_()
        self.frame.raise_()
        self.frame_2.raise_()
        MainWindow.setCentralWidget(self.centralwidget)

        self.retranslateUi(MainWindow)
        QtCore.QMetaObject.connectSlotsByName(MainWindow)

    def retranslateUi(self, MainWindow):
        _translate = QtCore.QCoreApplication.translate
        MainWindow.setWindowTitle(_translate("MainWindow", "MainWindow"))
        self.addTaskMenu.setText(_translate("MainWindow", "Add Task"))
        self.listTaskMenu.setText(_translate("MainWindow", "List Tasks"))
        self.label_4.setText(_translate("MainWindow", "Todays Task"))
        self.pushButton_2.setText(_translate("MainWindow", "View Task"))
        self.label_5.setText(_translate("MainWindow", "Task"))
        self.label_6.setText(_translate("MainWindow", "Description"))
        self.label_7.setText(_translate("MainWindow", "Date and Time"))
        self.label.setText(_translate("MainWindow", "select date"))
        self.label_2.setText(_translate("MainWindow", "Select Time"))
        self.label_3.setText(_translate("MainWindow", "Task Title"))
        self.taskDescEdit.setText(_translate("MainWindow", "Description"))
        self.pushButton.setText(_translate("MainWindow", "Add Task"))

        self.pushButton.clicked.connect(self.addTaskBtnClicked)
        self.pushButton_2.clicked.connect(self.showDetails)

    def showAddTaskFrame(self):
            self.frame_2.show()
            self.frame_3.hide()

    def showListTaskFrame(self):
            self.frame_2.hide()
            self.frame_3.show()
            date = self.calenderAddTask.selectedDate().toString()
            db = DBHandler()
            rows = db.getTasks(date)

            self.tableView.setSelectionBehavior(1)
            model = QStandardItemModel()
            model.setHorizontalHeaderLabels(["ID", "Title", "Desc", "Date", "Time"])

            try:
                    i = 0
                    for row in rows:
                            for column in range(0, 5):
                                    item = QStandardItem(str(row[column]))
                                    print(row)
                                    model.setItem(i, column, item)
                            i += 1
                    self.tableView.setModel(model)
            except Exception as e:
                    print(e)

    def addTaskBtnClicked(self):
            # print("push button clicked")
            tasktitle = self.taskNameEdit.text()
            taskdesc = self.TaskDescEdit.toPlainText()
            taskdate = self.calenderAddTask.selectedDate().toString()
            tasktime = self.addTaskTime.time().toString()

            t = Task(tasktitle, taskdesc, taskdate, tasktime)
            db = DBHandler()
            db.insertTask(t)
            self.taskNameEdit.clear()
            self.TaskDescEdit.clear()

            # self.tableView.selectionModel().selectedRows()

    def showDetails(self):
            indexes = self.tableView.selectedIndexes()
            id = indexes[0]
            title = indexes[1]
            desc = indexes[2]
            date = indexes[3]
            time = indexes[4]

            # print(id.data(),title.data(),desc.data())

            try:
                    self.todaysTaskTitle.setText(title.data())
                    self.todaysTaskDesc.setPlainText(desc.data())
                    self.todaysTaskDateTime.setText(date.data()+"\t"+time.data())
            except Exception as e:
                    print(e)


if __name__ == "__main__":
    import sys
    app = QtWidgets.QApplication(sys.argv)
    MainWindow = QtWidgets.QMainWindow()
    ui = Ui_MainWindow()
    ui.setupUi(MainWindow)
    MainWindow.show()
    sys.exit(app.exec_())
